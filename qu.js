const Discord = require('discord.js');
const client = new Discord.Client();
var fs = require("fs");
const ytdl = require("ytdl-core");
const { Client, Util } = require('discord.js');
const getYoutubeID = require('get-youtube-id');
const fetchVideoInfo = require('youtube-info');
const YouTube = require('simple-youtube-api');
const youtube = new YouTube("AIzaSyAdORXg7UZUo7sePv97JyoDqtQVi3Ll0b8");
const queue = new Map();

client.on('ready', () => {
  console.log('---------------');
  console.log(' Quran Bot Is Online')
  console.log('---------------')
  client.user.setStatus("idle")var fs = require("fs");

    client.user.setActivity(" -help | -invite  ",{type: 'WATCHING'})
    
    var prefix = "-"
    
    

client.on('message', message => {
	if(message.content.startsWith(prefix + 'quran')) {
		message.delete();
    const voiceChannel = message.member.voiceChannel;
    if (!voiceChannel) return message.reply(`**ÙŠØ­Ø¨ Ø§Ù† ØªÙƒÙˆÙ† ÙÙŠ Ø±ÙˆÙ… ØµÙˆØªÙŠ**`);

	let embed = new Discord.RichEmbed()
    .setAuthor(`${message.author.tag}`, message.author.avatarURL)
	.setColor('#000000')
	.setFooter("Ø¨ÙˆØª Ø§Ù„Ù‚Ø±Ø¢Ù† | ØµØ¯Ù‚Ø© Ø¬Ø§Ø±ÙŠØ© Ù„Ù„Ø¬Ù…ÙŠØ¹", 'https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQiqVT5PZAfcy8qZxlr3SQv3mmCw9zPiu2YBLIQ4bBePL2jLm7h')
      .setDescription(` 
     ğŸ•‹ Ø§ÙˆØ§Ù…Ø± Ø¨ÙˆØª Ø§Ù„Ù‚Ø±Ø¢Ù† Ø§Ù„ÙƒØ±ÙŠÙ… ğŸ•‹
	 
ğŸ‡¦ Ø§Ù„Ù‚Ø±Ø¢Ù† ÙƒØ§Ù…Ù„Ø§Ù‹ Ù…Ø§Ù‡Ø± Ø§Ù„Ù…Ø¹ÙŠÙ‚Ù„ÙŠ
ğŸ‡§ Ø³ÙˆØ±Ø© Ø§Ù„Ø¨Ù‚Ø±Ø© ÙƒØ§Ù…Ù„Ø© Ù„Ù„Ø´ÙŠØ® Ù…Ø´Ø§Ø±ÙŠ Ø§Ù„Ø¹ÙØ§Ø³ÙŠ
ğŸ‡¨ Ø³ÙˆØ±Ø© Ø§Ù„ÙƒÙ‡Ù ÙƒØ§Ù…Ù„Ø© Ø¨ØµÙˆØª Ù…Ø´Ø§Ø±Ù‰ Ø¨Ù† Ø±Ø§Ø´Ø¯ Ø§Ù„Ø¹ÙØ§Ø³ÙŠ
â¹ Ù„Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„Ù‚Ø±Ø¢Ù† Ø§Ù„ÙƒØ±ÙŠÙ…
ğŸ‡© Ø§Ù„Ù‚Ø±Ø¢Ù† ÙƒØ§Ù…Ù„Ø§Ù‹ Ø¹Ø¨Ø¯Ø§Ù„Ø¨Ø§Ø³Ø· Ø¹Ø¨Ø¯Ø§Ù„ØµÙ…Ø¯
ğŸ‡ª Ø§Ù„Ù‚Ø±Ø¢Ù† ÙƒØ§Ù…Ù„Ø§Ù‹ ÙŠØ§Ø³Ø± Ø§Ù„Ø¯ÙˆØ³Ø±ÙŠ
ğŸ‡« Ø³ÙˆØ±Ø© Ø§Ù„ÙˆØ§Ù‚Ø¹Ù‡ Ø¨ØµÙˆØª Ø§Ù„Ø´ÙŠØ® Ù…Ø´Ø§Ø±ÙŠ Ø¨Ù† Ø±Ø§Ø´Ø¯ Ø§Ù„Ø¹ÙØ§Ø³ÙŠ`)
	
	message.channel.sendEmbed(embed).then(msg => {
			msg.react('ğŸ‡¦')
		.then(() => msg.react('ğŸ‡§'))
		.then(() => msg.react('ğŸ‡¨'))
		.then(() => msg.react('â¹'))
		.then(() => msg.react('ğŸ‡©'))
		.then(() => msg.react('ğŸ‡ª'))
		.then(() => msg.react('ğŸ‡«'))

// Filters		
	let filter1 = (reaction, user) => reaction.emoji.name === 'ğŸ‡¦' && user.id === message.author.id;
	let filter2 = (reaction, user) => reaction.emoji.name === 'ğŸ‡§' && user.id === message.author.id;
	let filter3 = (reaction, user) => reaction.emoji.name === 'ğŸ‡¨' && user.id === message.author.id;
	let filter4 = (reaction, user) => reaction.emoji.name === 'â¹' && user.id === message.author.id;
	let filter5 = (reaction, user) => reaction.emoji.name === 'ğŸ‡©' && user.id === message.author.id;
	let filter6 = (reaction, user) => reaction.emoji.name === 'ğŸ‡ª' && user.id === message.author.id;
	let filter7 = (reaction, user) => reaction.emoji.name === 'ğŸ‡«' && user.id === message.author.id;

// Collectors
	let collector1 = msg.createReactionCollector(filter1, { time: 120000 });
	let collector2 = msg.createReactionCollector(filter2, { time: 120000 });
	let collector3 = msg.createReactionCollector(filter3, { time: 120000 });
	let collector4 = msg.createReactionCollector(filter4, { time: 120000 });
	let collector5 = msg.createReactionCollector(filter5, { time: 120000 });
	let collector6 = msg.createReactionCollector(filter6, { time: 120000 });
	let collector7 = msg.createReactionCollector(filter7, { time: 120000 });
	
// Events
collector1.on('collect', r => {
    voiceChannel.join()
      .then(connnection => {
        const stream = ytdl("https://www.youtube.com/watch?v=Ktync4j_nmA", { filter: 'audioonly' });
        const dispatcher = connnection.playStream(stream);
        dispatcher.on('end', () => voiceChannel.leave());
		collector1.stop();
		collector2.stop();
		collector3.stop();
		collector4.stop();
		collector5.stop();
		collector6.stop();
		collector7.stop();
		embed.setDescription(`<@${message.author.id}> **ØªÙ… ØªØ´ØºÙŠÙ„ Ø§Ù„Ù‚Ø±Ø¢Ù† Ø§Ù„ÙƒØ±ÙŠÙ…**`);
		msg.edit(embed).then(msg.delete(5000));
   });
});
collector2.on('collect', r => {
    voiceChannel.join()
      .then(connnection => {
        const stream = ytdl("https://www.youtube.com/watch?v=qFq5h4wtjaM&t=30s", { filter: 'audioonly' });
        const dispatcher = connnection.playStream(stream);
        dispatcher.on('end', () => voiceChannel.leave());
		collector1.stop();
		collector2.stop();
		collector3.stop();
		collector4.stop();
		collector5.stop();
		collector6.stop();
		collector7.stop();
		embed.setDescription(`<@${message.author.id}> **ØªÙ… ØªØ´ØºÙŠÙ„ Ø§Ù„Ù‚Ø±Ø¢Ù† Ø§Ù„ÙƒØ±ÙŠÙ…**`);
		msg.edit(embed).then(msg.delete(5000));
      });
});
collector3.on('collect', r => {
    voiceChannel.join()
      .then(connnection => {
        const stream = ytdl("https://www.youtube.com/watch?v=8UWKiKGQmsE", { filter: 'audioonly' });
        const dispatcher = connnection.playStream(stream);
        dispatcher.on('end', () => voiceChannel.leave());
		collector1.stop();
		collector2.stop();
		collector3.stop();
		collector4.stop();
		collector5.stop();
		collector6.stop();
		collector7.stop();
		embed.setDescription(`<@${message.author.id}> **ØªÙ… ØªØ´ØºÙŠÙ„ Ø§Ù„Ù‚Ø±Ø¢Ù† Ø§Ù„ÙƒØ±ÙŠÙ…**`);
		msg.edit(embed).then(msg.delete(5000));
      });
});
collector4.on('collect', r => {
	if (message.guild.voiceConnection) message.guild.voiceConnection.disconnect();
		collector1.stop();
		collector2.stop();
		collector3.stop();
		collector4.stop();
		collector5.stop();
		collector6.stop();
		collector7.stop();
		embed.setDescription(`<@${message.author.id}> **ØªÙ… Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„Ù‚Ø±Ø¢Ù† Ø§Ù„ÙƒØ±ÙŠÙ…**`);
		msg.edit(embed).then(msg.delete(5000));
});
collector5.on('collect', r => {
    voiceChannel.join()
      .then(connnection => {
        const stream = ytdl("https://www.youtube.com/watch?v=vqXLGtZcUm8", { filter: 'audioonly' });
        const dispatcher = connnection.playStream(stream);
        dispatcher.on('end', () => voiceChannel.leave());
		collector1.stop();
		collector2.stop();
		collector3.stop();
		collector4.stop();
		collector5.stop();
		collector6.stop();
		collector7.stop();
		embed.setDescription(`<@${message.author.id}> **ØªÙ… ØªØ´ØºÙŠÙ„ Ø§Ù„Ù‚Ø±Ø¢Ù† Ø§Ù„ÙƒØ±ÙŠÙ…**`);
		msg.edit(embed).then(msg.delete(5000));
      });
});
collector6.on('collect', r => {
    voiceChannel.join()
      .then(connnection => {
        const stream = ytdl("https://www.youtube.com/watch?v=WYT0pQne-7w", { filter: 'audioonly' });
        const dispatcher = connnection.playStream(stream);
        dispatcher.on('end', () => voiceChannel.leave());
		collector1.stop();
		collector2.stop();
		collector3.stop();
		collector4.stop();
		collector5.stop();
		collector6.stop();
		collector7.stop();
		embed.setDescription(`<@${message.author.id}> **ØªÙ… ØªØ´ØºÙŠÙ„ Ø§Ù„Ù‚Ø±Ø¢Ù† Ø§Ù„ÙƒØ±ÙŠÙ…**`);
		msg.edit(embed).then(msg.delete(5000));
      });
});
collector7.on('collect', r => {
    voiceChannel.join()
      .then(connnection => {
        const stream = ytdl("https://www.youtube.com/watch?v=LTRcg-gR78o", { filter: 'audioonly' });
        const dispatcher = connnection.playStream(stream);
        dispatcher.on('end', () => voiceChannel.leave());
		collector1.stop();
		collector2.stop();
		collector3.stop();
		collector4.stop();
		collector5.stop();
		collector6.stop();
		collector7.stop();
		embed.setDescription(`<@${message.author.id}> **ØªÙ… ØªØ´ØºÙŠÙ„ Ø§Ù„Ù‚Ø±Ø¢Ù† Ø§Ù„ÙƒØ±ÙŠÙ…**`);
		msg.edit(embed).then(msg.delete(5000));
      });
});
})
}
});





             client.on('message', message => {
                if(message.content === prefix + "support") {
                    let embed = new Discord.RichEmbed ()
                    embed.setTitle("**:arrow_right: Support Quran Bot !**")
                    .setURL("https://discord.gg/zf6SECF");
                   message.channel.sendEmbed(embed);
                  }
});

             client.on('message', message => {
                if(message.content === prefix + "invite") {
                    let embed = new Discord.RichEmbed ()
                    embed.setTitle("**:arrow_right: Invite Quran Bot !**")
                    .setURL("https://discordapp.com/api/oauth2/authorize?client_id=476524853759967252&permissions=3162112&scope=bot");
                   message.channel.sendEmbed(embed);
                  }
});









client.on('message', message => {
    if(message.content === prefix + "bot") {
        const embed = new Discord.RichEmbed()
        .setColor("#00FFFF")
        .setThumbnail('https://cdn4.iconfinder.com/data/icons/thin-games-fun/24/thin-1389_bot_robot_toys-512.png')
        .setDescription(`
**__Bot Info__** :sparkles:

**Servers**ğŸŒ **__${client.guilds.size}__**
**Users**ğŸ‘¥ **__${client.users.size}__**
**Channels**ğŸ“š **__${client.channels.size}__** `)
               message.channel.sendEmbed(embed);
           }
});



	client.on('message', msg => {
  if (msg.content === prefix + 'help') {
    msg.reply('**Ø´ÙŠÙŠÙƒ Ø¹Ø®Ø§ØµÙƒ ÙŠØ§ Ø­Ù„Ùˆ : )**');
  }
});

client.on("message", message => {
    if (message.content === prefix + "help") {
     const embed = new Discord.RichEmbed() 
         .setColor("#ffff00")
              .setFooter('Quran-Bot')
         .setDescription(`
  
     **âœ¨QuranBot Commands |Ø§ÙˆØ§Ù…Ø±  Ø¨ÙˆØª Ø§Ù„Ù‚Ø±Ø§Ù†âœ¨
     
 â–  ${prefix}quranâ¾ Ù„ØªØ´ØºÙŠÙ„ Ø§Ù„Ù‚Ø±Ø§Ù†

  â–  ${prefix}supportâ¾ Ù„Ø³ÙŠØ±ÙØ± Ø³Ø¨ÙˆØ±Øª Ø§Ù„Ø¨ÙˆØª

 â–  ${prefix}inviteâ¾ Ù„Ø¯Ø¹ÙˆÙ‡ Ø§Ù„Ø¨ÙˆØª Ù„Ù„Ø³ÙŠØ±ÙØ±
   `)
   message.author.sendEmbed(embed)
   
   }
   });
   
   
   client.login(process.env.BOT_TOKEN);  //Ù„Ø§ ØªØ­Ø· Ø§Ù„ØªÙˆÙƒÙ† Ø­Ù‚Ùƒ Ù‡Ù†Ø§
